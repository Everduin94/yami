<ng-container *ngIf="auth.userId$ | async as userId">
  <form class="container" [formGroup]="form" (ngSubmit)="onSubmit(userId)">

    <app-quill label="Question" formControlName="question"></app-quill>
    <app-quill label="Answer" formControlName="answer"></app-quill>
    <div class="form__topic-controls">
  
      <ng-container *ngIf="!showAddCategory">
        <mat-form-field style="margin-right: 5px;">
          <mat-label>Category</mat-label>
          <mat-select formControlName="category">
            <ng-container *ngIf="categories$ | async as categories">
              <mat-option *ngFor="let category of categories" [value]="category">
                {{category}}
              </mat-option>
            </ng-container>
    
          </mat-select>
        </mat-form-field>
        <button mat-raised-button color="accent" (click)="showAddCategory = !showAddCategory">New Category</button>
      </ng-container>
      
      <!-- TODO:
      1) Hide -- Until Button Click
      2) On Submit
        2.1) Add Reference to FireBase
        2.2) Set Reference in Select
        2.3) Hide Input -->
  
      <ng-container *ngIf="showAddCategory">
        <mat-form-field>
          <input #addCategoryInput matInput placeholder="Category">
        </mat-form-field>
        <button 
        mat-raised-button 
        color="accent" 
        (click)="
        addCategory(addCategoryInput.value, userId);
        showAddCategory = !showAddCategory;
        $event.preventDefault();
        ">Add Category</button>
  
      </ng-container>  
      
    </div>
    <button mat-raised-button color="primary">Submit</button>
  
  </form>
</ng-container>

